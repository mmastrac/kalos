#if defined(KALOS_TOKEN) || defined(KALOS_TOKEN_OP) || defined(KALOS_TOKEN_OP_ASG)
#ifndef KALOS_TOKEN_OP
#define KALOS_TOKEN_OP(x, y, z) KALOS_TOKEN(y)
#endif
#ifndef KALOS_TOKEN_OP_ASG
#define KALOS_TOKEN_OP_ASG(x, y) KALOS_TOKEN(EQ_##x)
#endif
#ifndef KALOS_TOKEN
#define KALOS_TOKEN(x) 
#endif
KALOS_TOKEN(ERROR)
KALOS_TOKEN(EOF)

KALOS_TOKEN(HANDLE)

KALOS_TOKEN(IMPORT)
KALOS_TOKEN(VAR)
KALOS_TOKEN(CONST)
KALOS_TOKEN(IF)
KALOS_TOKEN(ELSE)
KALOS_TOKEN(LOOP)
KALOS_TOKEN(FOR)
KALOS_TOKEN(IN)
KALOS_TOKEN(BREAK)
KALOS_TOKEN(CONTINUE)
KALOS_TOKEN(DEBUGGER)
KALOS_TOKEN(TRUE)
KALOS_TOKEN(FALSE)

KALOS_TOKEN(STRING)
KALOS_TOKEN(STRING_INTERPOLATION)
KALOS_TOKEN(STRING_FORMAT_SPEC)
KALOS_TOKEN(INTEGER)
KALOS_TOKEN(WORD)

KALOS_TOKEN(BRA_OPEN)
KALOS_TOKEN(BRA_CLOSE)
KALOS_TOKEN(SQBRA_OPEN)
KALOS_TOKEN(SQBRA_CLOSE)
KALOS_TOKEN(PAREN_OPEN)
KALOS_TOKEN(PAREN_CLOSE)
KALOS_TOKEN(COMMA)
KALOS_TOKEN(SEMI)
KALOS_TOKEN(PERIOD)
KALOS_TOKEN(BANG)
KALOS_TOKEN(TILDE)
KALOS_TOKEN(COLON)
KALOS_TOKEN(EQ)
KALOS_TOKEN_OP(3, STAR, MULTIPLY)
KALOS_TOKEN_OP(3, SLASH, DIVIDE)
KALOS_TOKEN_OP(3, PERCENT, MODULUS)
KALOS_TOKEN_OP(4, PLUS, ADD)
KALOS_TOKEN_OP(4, MINUS, SUBTRACT)
KALOS_TOKEN_OP(5, LEFT_SHIFT, LEFT_SHIFT)
KALOS_TOKEN_OP(5, RIGHT_SHIFT, RIGHT_SHIFT)
KALOS_TOKEN_OP(6, LT, LT)
KALOS_TOKEN_OP(6, GT, GT)
KALOS_TOKEN_OP(6, GTE, GTE)
KALOS_TOKEN_OP(6, LTE, LTE)
KALOS_TOKEN_OP(7, EQEQ, EQUAL)
KALOS_TOKEN_OP(7, NOTEQ, NOT_EQUAL)
KALOS_TOKEN_OP(8, BITAND, BIT_AND)
KALOS_TOKEN_OP(9, BITXOR, BIT_XOR)
KALOS_TOKEN_OP(10, BITOR, BIT_OR)
KALOS_TOKEN_OP(11, LOGAND, LOGICAL_AND)
KALOS_TOKEN_OP(12, LOGOR, LOGICAL_OR)
KALOS_TOKEN_OP_ASG(STAR, MULTIPLY)
KALOS_TOKEN_OP_ASG(SLASH, DIVIDE)
KALOS_TOKEN_OP_ASG(PERCENT, MODULUS)
KALOS_TOKEN_OP_ASG(PLUS, ADD)
KALOS_TOKEN_OP_ASG(MINUS, SUBTRACT)
KALOS_TOKEN_OP_ASG(LEFT_SHIFT, LEFT_SHIFT)
KALOS_TOKEN_OP_ASG(RIGHT_SHIFT, RIGHT_SHIFT)
KALOS_TOKEN_OP_ASG(BITAND, BIT_AND)
KALOS_TOKEN_OP_ASG(BITXOR, BIT_XOR)
KALOS_TOKEN_OP_ASG(BITOR, BIT_OR)
KALOS_TOKEN_OP_ASG(LOGAND, LOGICAL_AND)
KALOS_TOKEN_OP_ASG(LOGOR, LOGICAL_OR)
#undef KALOS_TOKEN
#undef KALOS_TOKEN_OP
#undef KALOS_TOKEN_OP_ASG
#endif

#if defined(KALOS_OP) || defined(KALOS_OP_C)
#ifndef KALOS_OP_C
#define KALOS_OP_C(x, y) KALOS_OP(x, 2, 1)
#endif
#ifndef KALOS_OP
#define KALOS_OP(x, in, out)
#endif
KALOS_OP(END, 0, 0)
KALOS_OP(DROP, 1, 0)
KALOS_OP(DUP, -1, -1)
KALOS_OP(DEBUGGER, 0, 0)
KALOS_OP(PUSH_STRING, 0, 1)
KALOS_OP(PUSH_INTEGER, 0, 1)
KALOS_OP(PUSH_TRUE, 0, 1)
KALOS_OP(PUSH_FALSE, 0, 1)
KALOS_OP(GOTO, 1, 0)
KALOS_OP(GOTO_IF, 2, 0)
KALOS_OP(CALL, -1, -1)
KALOS_OP(ITERATOR, 1, 1)
KALOS_OP(ITERATOR_NEXT, 1, 3)
KALOS_OP(GETPROP, -1, -1)
KALOS_OP(SETPROP, -1, -1)
KALOS_OP(STORE_LOCAL, 2, 0)
KALOS_OP(LOAD_LOCAL, 1, 1)
KALOS_OP(STORE_GLOBAL, 2, 0)
KALOS_OP(LOAD_GLOBAL, 1, 1)
KALOS_OP(NEGATE, 1, 1)
KALOS_OP(POSIVATE, 1, 1)
KALOS_OP(BITWISE_NOT, 1, 1)
KALOS_OP(LOGICAL_NOT, 1, 1)
KALOS_OP(FORMAT, 1, 1)
KALOS_OP(TO_STRING, 1, 1)
KALOS_OP(TO_BOOL, 1, 1)
KALOS_OP(TO_INT, 1, 1)
KALOS_OP(TO_HEX, 1, 1)
KALOS_OP(TO_CHAR, 1, 1)
KALOS_OP(LENGTH, 1, 1)
KALOS_OP(MINIMUM, 2, 1)
KALOS_OP(MAXIMUM, 2, 1)
KALOS_OP(ORD, 1, 1)
KALOS_OP(ABS, 1, 1)
KALOS_OP(RANGE, 2, 1)
KALOS_OP(SPLIT, 2, 1)
KALOS_OP_C(ADD, +)
KALOS_OP_C(SUBTRACT, -)
KALOS_OP_C(MULTIPLY, *)
KALOS_OP_C(DIVIDE, /)
KALOS_OP_C(MODULUS, %)
/* Comparison ops must be kept together */
KALOS_OP_C(EQUAL, ==)
KALOS_OP_C(NOT_EQUAL, !=)
KALOS_OP_C(GT, >)
KALOS_OP_C(GTE, >=)
KALOS_OP_C(LT, <)
KALOS_OP_C(LTE, <=)
/* End comparison ops */
KALOS_OP_C(LEFT_SHIFT, <<)
KALOS_OP_C(RIGHT_SHIFT, >>)
KALOS_OP_C(BIT_AND, &)
KALOS_OP_C(BIT_OR, |)
KALOS_OP_C(BIT_XOR, ^)
KALOS_OP_C(LOGICAL_AND, &&)
KALOS_OP_C(LOGICAL_OR, ||)
#undef KALOS_OP
#undef KALOS_OP_C
#endif

#ifdef KALOS_BUILTIN
// Must be sorted!
KALOS_BUILTIN(abs, 1, ABS)
KALOS_BUILTIN(bool, 1, TO_BOOL)
KALOS_BUILTIN(chr, 1, TO_CHAR)
KALOS_BUILTIN(hex, 1, TO_HEX)
KALOS_BUILTIN(int, 1, TO_INT)
KALOS_BUILTIN(len, 1, LENGTH)
KALOS_BUILTIN(max, 2, MAXIMUM)
KALOS_BUILTIN(min, 2, MINIMUM)
KALOS_BUILTIN(ord, 1, ORD)
KALOS_BUILTIN(range, 2, RANGE)
KALOS_BUILTIN(split, 2, SPLIT)
KALOS_BUILTIN(str, 1, TO_STRING)
#undef KALOS_BUILTIN
#endif
